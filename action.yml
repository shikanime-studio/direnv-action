name: direnv-action
author: Shikanime Studio
branding:
  icon: globe
  color: gray-dark
description: Direnv environment
inputs:
  flake-url:
    description: Nix flake URL or path to develop from
    required: false
    default: nixpkgs#direnv
  extra-args:
    description: Extra arguments to pass to `nix run`
    required: false
    default: ""
runs:
  using: composite
  steps:
    - name: Direnv with nix-direnv and export environment
      shell: bash
      run: |
        nix run "${{ inputs.flake-url }}" ${{ inputs.extra-args }} direnv allow
        nix run "${{ inputs.flake-url }}" ${{ inputs.extra-args }} direnv export gha > "$GITHUB_ENV"
